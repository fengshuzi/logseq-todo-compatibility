# 快捷键设置指南

## 问题说明

Obsidian 的原生 `Cmd+Enter` (Mac) 或 `Ctrl+Enter` (Windows/Linux) 快捷键默认绑定到 "Toggle checklist status" 命令，用于切换 `- [ ]` 复选框。

要使用本插件的 TODO 功能替代原生复选框，需要手动设置快捷键。

## 设置步骤

### 方法 1: 手动设置（推荐）

1. **打开快捷键设置**
   - 打开 Settings (设置)
   - 点击 Hotkeys (快捷键)

2. **禁用原生命令**
   - 搜索 "Toggle checklist status"
   - 找到绑定了 `Cmd+Enter` 的命令
   - 点击 X 删除这个快捷键绑定

3. **设置插件命令**
   - 搜索 "Insert Logseq TODO task"
   - 点击 + 添加快捷键
   - 按下 `Cmd+Enter` (Mac) 或 `Ctrl+Enter` (Windows/Linux)
   - 保存

### 方法 2: 使用拦截选项（实验性）

1. **启用拦截选项**
   - 打开插件设置
   - 启用 "Use TODO instead of checkbox for Cmd+Enter"
   - 重新加载 Obsidian

2. **验证**
   - 创建列表项 `-`
   - 按 `Cmd+Enter`
   - 应该看到 `- TODO` 而不是 `- [ ]`

## 验证设置

### 测试 1: 普通列表 → TODO
```markdown
- 测试任务
```
按 `Cmd+Enter`，应该变成：
```markdown
- TODO 测试任务
```

### 测试 2: TODO → 复选框
```markdown
- TODO 测试任务
```
按 `Cmd+Enter`，应该变成：
```markdown
- [ ] 测试任务
```

### 测试 3: 复选框 → TODO
```markdown
- [ ] 测试任务
```
按 `Cmd+Enter`，应该变成：
```markdown
- TODO 测试任务
```

## 故障排除

### 问题 1: 按 Cmd+Enter 还是生成 `- [ ]`

**原因**: 原生命令的优先级更高

**解决方案**:
1. 确认已删除 "Toggle checklist status" 的 `Cmd+Enter` 绑定
2. 确认已为 "Insert Logseq TODO task" 设置 `Cmd+Enter`
3. 重新加载 Obsidian

### 问题 2: 快捷键冲突

**原因**: 其他插件也使用了 `Cmd+Enter`

**解决方案**:
1. 在 Hotkeys 设置中搜索 `Cmd+Enter`
2. 查看所有使用这个快捷键的命令
3. 决定保留哪个，删除其他的

### 问题 3: 拦截选项不工作

**原因**: Obsidian 的命令优先级机制

**解决方案**:
1. 使用方法 1（手动设置）
2. 这是最可靠的方法

## 推荐配置

### 完整的 TODO 工作流快捷键

| 命令 | 推荐快捷键 | 说明 |
|------|-----------|------|
| Insert Logseq TODO task | `Cmd+Enter` | 插入/切换 TODO |
| Toggle Logseq TODO/DONE | `Cmd+Shift+D` | 快速标记完成 |
| Cycle Logseq TODO status | `Cmd+Shift+C` | 循环切换状态 |
| Insert Logseq TODO | `Cmd+Shift+T` | 快速插入 TODO |

### 设置这些快捷键

1. Settings → Hotkeys
2. 搜索 "Logseq"
3. 为每个命令设置快捷键
4. 保存

## 常见问题

### Q: 为什么不能自动覆盖原生命令？

A: Obsidian 的插件 API 不允许插件直接覆盖核心命令。这是为了保护用户体验和防止插件冲突。

### Q: 我可以同时使用 TODO 和复选框吗？

A: 可以！插件支持双向转换：
- `- TODO xxx` ⟷ `- [ ] xxx`
- 按 `Cmd+Enter` 即可切换

### Q: 如何恢复原生行为？

A: 
1. Settings → Hotkeys
2. 删除 "Insert Logseq TODO task" 的 `Cmd+Enter` 绑定
3. 为 "Toggle checklist status" 重新设置 `Cmd+Enter`

## 视频教程（建议）

如果文字说明不够清楚，建议录制一个简短的视频教程展示设置过程。

## 需要帮助？

如果遇到问题：
1. 检查 Obsidian 版本（需要 0.15.0+）
2. 检查插件是否已启用
3. 查看浏览器控制台是否有错误（Cmd+Shift+I）
4. 提交 Issue 到 GitHub
